services:
  web:
    build: .
    container_name: document_enhancer_web
    volumes:
      - ./input:/app/input
      - ./output:/app/output
      - ./uploads:/app/uploads
      - ./processed:/app/processed
    ports:
      - "5000:5000"
    environment:
      - FLASK_ENV=development
    command: python web_app.py

  # Опционально: CLI версия
  cli:
    build: .
    container_name: document_enhancer_cli
    volumes:
      - ./input:/app/input
      - ./output:/app/output
    command: python enhance_script.py --method smooth_quality
    profiles: ["cli"]